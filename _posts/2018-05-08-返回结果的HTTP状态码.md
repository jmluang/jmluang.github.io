---
layout: post
title: 返回结果的HTTP状态码
---

HTTP状态码负责表示客户端HTTP请求的返回结果、标记服务器端的处理是否正常、通知出现的错误等工作。

状态码的职责是当客户端向服务器发送请求时，描述返回的请求结果。借助状态码，用户可以知道服务端是正常处理了请求，还是出现了错误。

状态码以3位数字和原因短语组成。数字的第一位指定了响应类别，后两位无分类。响应类别有以下5种。

状态码的类别：
| - | 类别 | 原因短语 |
|--|--|--|
| 1XX | Informational（信息性状态码） | 接收的请求正在处理 |
| 2XX | Success（成功状态码） | 请求正常处理完毕 |
| 3XX | Redirection（重定向状态码） | 需要进行附加操作以完成请求 |
| 4XX | Client Error（客户端错误状态码） | 服务器无法处理请求 |
| 5XX | Server Error（服务器错误状态码） | 服务器处理请求出错 |
只要遵守状态码类别的定义，即使改变 [RFC2616](https://tools.ietf.org/html/rfc2616#section-10.1) 中定义的状态码，或服务器端自行创建状态码都没问题。
```php
// php code
header("HTTP/1.1 299 Success But Exception");
```

> 下面列举一些可能会用到的状态码

### 2XX 成功
2XX 的响应结果表示请求被正常处理了。
####  200 Ok
表示从客户端发来的请求在服务器端被正常处理了。
在响应报文内，随状态码一起返回的信息会因**方法**的不同而发生改变。比如，使用 GET 方法时，对应请求资源的尸体会作为响应返回；而使用 HEAD 方法时，对应请求资源的实体主体不随报文首部作为响应返回。
#### 201  Created
表示客户端请求已经被接收了，所请求的资源已经被正常创建了，可以通过在实体中的 URIs 访问到该资源。
如果该资源未能被正常创建，应该返回 202，而不是201
#### 202  Accepted
表示客户端已经接收到并且开始处理请求，但是还没有处理完。
返回响应的目的是允许发送其他请求到服务器，而不必保持连接等待操作的完成。一般来说返回的实体中应该返回当前任务的处理进度，或者返回指向能查看进度的 URI。
#### 204  No Content
表示服务器接收的请求已成功处理，但在返回的响应报文中不含实体的主体部分。**另外，也不允许返回任何实体的主体。**比如，当从浏览器发出请求处理后，返回 204 响应，那么浏览器显示的页面不发生更新。
一般在只需要从客户端往服务器发送信息，而对客户端不需要发送新信息内容的情况下使用。
#### 206  Partial Content
表示客户端进行了范围请求，而服务器成功执行了这部分的请求。响应报文中包含由 Content-Range 指定返回的实体内容。

### 3XX 重定向
3XX 响应结果表明浏览器需要执行某些特殊的处理以正确处理请求。
#### 301  Moved Permanently
永久性重定向。该状态码表示请求的资源已被分配了新的 URI，以后使用资源现在所指定的URL。也就是说，如果已经把资源对应的 URI 保存为书签了，这是应该按 Location 首部字段提示的 URI 重新保存。

```php
header("HTTP/1.1 301 Moved Permanently");
/**
* 实际上只用 Location 就能实现转跳。
* 但是如果是永久性的搬迁的话，推荐带上 301，
* 因为这样对搜索引擎比较友好。
**/
header("Location:https://github.com/jmluang");
```
#### 302  Found
临时性重定向。表示请求的资源被临时分配到了新的 URI，希望用户（本次）使用新的 URI 访问。

> 301 与 302：注意 302 表示的是临时的重定向，说明被移动的资源以后还有可能会被移动。比如，如果 URI 被收藏到了收藏夹，则返回 301 的话书签上的 URI 也会跟着改变，但是返回 302 的话书签不会改变。
> 301，302标准是禁止将 POST 方法改变成GET方法的，但是实际使用时大家都不会遵循这个标准。

#### 303  See Other
表示由于请求对应的资源存在着另一个 URI ，应该使用 GET 方法定向获取请求的资源。
> 要注意：很多HTTP1.1之前的浏览器不能正确理解 303 的。这个时候可以考虑使用 302 代替。。

#### 304  Not Modified
表示客户端发送附带条件的请求（即采用GET方法的请求报文中包含 If-Match，If-Modified-Since，If-None-Match，If-Range，If-Unmodified-Since中任一首部）时，服务器端允许请求访问资源，但因发生请求未满足条件的情况后，直接返回 304 Not Modified（**服务器端资源未改变，可直接使用客户端未过期的缓存**）。
> 304 状态码返回时，不包含任何响应的主体部分；304 虽然被划分在 3XX 类别中，但是和重定向没有关系。

#### 307 Temporary Redirect
临时重定向，该状态与 302 Not Found 有着相同的含义。
307 会遵照浏览器标准，不会从 POST 变成 GET。但是，对于处理响应时的行为，每种浏览器有可能出现不同的情况。

### 4XX 客户端错误
4XX 的响应结果表明客户端是发生错误的原因所在。
 
#### 400 Bad Request
表示请求报文中存在语法错误。当错误发生时，需修改请求内容后再次发送请求。另外，浏览器会像 200 OK 一样对该该状态码

#### 401 Unauthorized
该zhuang'tai'ma


> Written with [StackEdit](https://stackedit.io/).
<!--stackedit_data:
eyJoaXN0b3J5IjpbLTE2MTY2MTcyMjEsMTg3MjIxMzQ2MCwtMT
YxOTc1MzYwOF19
-->